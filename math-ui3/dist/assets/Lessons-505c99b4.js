import{d as L,r as i,w as b,o as S,c as x,e as a,g as e,D as q,m as C,V as H,h as E,f as d,i as v,s as T,k as D,l as V,n as k,a as F,b as j,E as z,q as g,G,H as J,I as K,J as O,C as Q,B as W}from"./index-83a93b04.js";import{V as X}from"./VForm-383c7102.js";import{a as B,b as Y,V as Z,c as $}from"./VCard-d9169958.js";import{V as A,u as ee}from"./lessonStore-85165b61.js";import{a as w,V as ae}from"./VDialog-bcf93b6d.js";const te=["innerHTML"],se=C("small",null,"*indicates required field",-1),le=L({__name:"NewItemDialog",props:{dialog:{type:Boolean,default:!1},title:{type:String}},setup(f){const p=f,_=k();let s=i(!1);b(()=>p.dialog,m=>{s.value=m});let l=i("");function u(){_.emit("newItemDialogSave",l.value)}return(m,o)=>(S(),x(w,{justify:"center"},{default:a(()=>[e(ae,{modelValue:d(s),"onUpdate:modelValue":o[1]||(o[1]=n=>v(s)?s.value=n:s=n),persistent:"","max-width":"400px","min-height":"400x"},{default:a(()=>[e(X,{onSubmit:q(u,["prevent"])},{default:a(()=>[e(B,null,{default:a(()=>[e(Y,{class:"headline"},{default:a(()=>[C("span",{innerHTML:f.title},null,8,te)]),_:1}),e(Z,null,{default:a(()=>[e(A,null,{default:a(()=>[e(w,null,{default:a(()=>[e(H,{cols:"12"},{default:a(()=>[e(E,{autofocus:"",modelValue:d(l),"onUpdate:modelValue":o[0]||(o[0]=n=>v(l)?l.value=n:l=n),label:"name*",required:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),se]),_:1}),e($,null,{default:a(()=>[e(T),e(D,{"data-cy":"button-login",color:"blue darken-1",type:"submit"},{default:a(()=>[V(" Save ")]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1},8,["modelValue"])]),_:1}))}}),de=L({__name:"Lessons",setup(f){let p=i(!1);const _=k(),s=F();j();const l=z(),u=ee(),m=g(()=>l.isTeacher()?"My Lessons":"Lessons Shared with me");let o=i(!1),n="<span>Please specify <strong>lesson</strong> title</span";i("");let c=10;G(()=>N()),b(()=>_.bus.value.get("newItemDialogSave"),r=>{P(r)});const I=g(()=>[{title:"Name",key:"name",sortable:!1},{title:"Created At",key:"createdAt",sortable:!1}]),M=g(()=>Array.from(u.getLessons().value.values()).map(t=>({uuid:t.uuid,name:t.name,createdAt:t.createdAt?new Date(t.createdAt).toLocaleDateString("en-us",{weekday:"long",year:"numeric",month:"short",day:"numeric"}):""})));async function N(){await u.loadLessons(),l.isTeacher()&&u.getLessons().value.size===0&&h(),p.value=!0}function h(){o.value=!0}async function P(r){o.value=!1;let t=await u.addLesson(r);s.push({path:"/lesson/"+t.uuid})}async function R(r,t){s.push({path:"/lesson/"+t.item.uuid})}return(r,t)=>{const U=J("v-data-table");return S(),x(A,null,{default:a(()=>[e(le,{dialog:d(o),title:d(n)},null,8,["dialog","title"]),e(B,{class:"mx-auto","max-width":"800","min-height":"600"},{default:a(()=>[e(K,{color:"primary",dark:""},{default:a(()=>[e(O,null,{default:a(()=>[V(Q(m.value),1)]),_:1}),e(T),e(D,{icon:"",onClick:h},{default:a(()=>[e(W,null,{default:a(()=>[V("mdi-plus")]),_:1})]),_:1})]),_:1}),e(U,{"items-per-page":d(c),"onUpdate:itemsPerPage":t[0]||(t[0]=y=>v(c)?c.value=y:c=y),headers:I.value,items:M.value,"item-value":"name",class:"elevation-1","onClick:row":R,"hide-no-data":!0,hover:!0},null,8,["items-per-page","headers","items"])]),_:1})]),_:1})}}});export{de as default};

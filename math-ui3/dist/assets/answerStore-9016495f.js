import{K as A,a3 as C,E as m}from"./index-83a93b04.js";import{u as S}from"./lessonStore-85165b61.js";const a=S(),g=C(),b=A("answer",()=>{let n=new Map,s={};function d(){return n}function w(){return s}async function f(t){s=await g.getQuestion(t)}async function r(){a.getLessons()||a.loadLessons(),(await g.getQuestions(a.getCurrentLesson().uuid)).forEach(e=>{n.set(e.uuid,e)})}async function l(t){t.lesson=a.getCurrentLesson();let e=await g.addQuestion(t);return n.set(e.uuid,e),s=e,t}function o(t){n.get(t)||r(),n.get(t)&&(s=n.get(t))}function Q(t){n.delete(t.uuid)}return{getQuestions:d,getCurrentQuestion:w,loadQuestions:r,loadQuestion:f,addQuestion:l,setCurrentQuestion:o,removeQuestion:Q}}),u=b(),p=m(),c=C(),F=A("answer",()=>{let n=new Map,s={};function d(){return n}function w(){return s}async function f(t){const e=await c.getAnswer(t),i=await c.getQuestion(e.question.uuid);e&&(n.set(e.uuid,e),s=e,u.loadQuestion(i.uuid))}async function r(){u.getQuestions()||u.loadQuestions(),(await c.getAnswers(u.getCurrentQuestion().uuid)).forEach(e=>{n.set(e.uuid,e)})}async function l(){let t=null;if(n.forEach(i=>{if(i.question.uuid==u.getCurrentQuestion().uuid){t=i;return}}),t)return;let e={};e.question=u.getCurrentQuestion(),e.user=p.getCurrentUser(),e=await c.addAnswer(e),n.set(e.uuid,e),o(e)}function o(t){s=t}function Q(t){n.delete(t.uuid)}return{getAnswers:d,getCurrentAnswer:w,loadAnswer:f,loadAnswers:r,addAnswer:l,setCurrentAnswer:o,removeAnswer:Q}});export{F as a,b as u};
